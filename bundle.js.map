{"version":3,"sources":["webpack:///webpack/bootstrap 019b604f8990bd1f2fb3","webpack:///./PrimeOrdeal.js","webpack:///./js/view.js","webpack:///./js/game.js","webpack:///./js/bubble.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;AACA,EAAC,E;;;;;;ACND;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uB;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA,IAAG,E;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA,mDAAkD,UAAU;AAC5D;AACA,kB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,M;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC,+E;AACA;AACA,yD;AACA;AACA;AACA;AACA,IAAG;AACH,+BAA8B;AAC9B;;AAEA,kBAAiB,sBAAsB;AACvC;AACA,yCAAwC,cAAc;AACtD,oBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA,QAAO,wD;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA4C;AAC5C;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qB;AACA,IAAG;AACH;;AAEA,+C;AACA;AACA,kBAAiB,yBAAyB;;AAE1C;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA,wB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG,E;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,yBAAyB;AAC1C,+C;AACA,wC;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,sBAAqB,yBAAyB;AAC9C;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA,qC;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;;AAEA,uB;;;;;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,M;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yB","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 019b604f8990bd1f2fb3\n **/","var View = require('./js/view.js');\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n\tvar canvas = document.getElementById(\"canvas\");\n\tvar ctx = canvas.getContext('2d');\n\tnew View(ctx).start();\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./PrimeOrdeal.js\n ** module id = 0\n ** module chunks = 0\n **/","var Game = require('./game.js');\nvar View = function(ctx){\n  this.ctx = ctx;\n  this.game = new Game(ctx); //I could set difficulties, which takes in # of bubble to start with\n  this.page = 1;\n  document.addEventListener(\"click\", this.findMousePos.bind(this));\n  document.onmousemove = this.moveMouse.bind(this);\n};\n\nView.prototype.start = function() {\n    var intId = setInterval(function(){\n    \tswitch (this.page){\n    \t\tcase 1:\n    \t\t\tthis.startScreen();\n    \t\t\tbreak;\n    \t\tcase 2:\n    \t\t\tthis.gameScreen.call(this, intId);\n    \t\t\tbreak;\n    \t\tcase 5:\n    \t\t this.loseScreen.call(this, intId);\n    \t\t\tbreak;\n    \t}\n    }.bind(this), 20);\n};\nView.prototype.moveMouse = function(event){\n\t\tif (this.page === 1){\n\t\tvar x = event.pageX,\n\t\t\t\ty = event.pageY;\n\t\tif (x >= 154 && x <= 227 && y <= 116 && y >= 86){\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.rect(114, 64, 93, 50);\n\t\t\tthis.ctx.stroke();\n\t\t} else if (x >= 136 && x <= 316 && y >= 131 && y <= 171){\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.rect(105, 110, 220, 55);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\t}\n};\nView.prototype.findMousePos = function(event){\n\tif (this.page === 1){\n\t\tvar x = event.pageX,\n\t\t\t\ty = event.pageY;\n\t\tif (x >= 154 && x <= 227 && y <= 116 && y >= 86){\n\t\t\tthis.page = 2;\n\t\t} else if (x >= 136 && x <= 316 && y >= 131 && y <= 171){\n\t\t\tthis.page = 3;\n\t\t}\telse if (x >= 161 && x <= 246 && y >= 512 && y <= 545){\n\t\t\tthis.page = 2;\n\t\t}\n\t}\n};\nView.prototype.gameScreen = function(intId){\n\t  // this.game.move();\n    this.game.draw();\n    this.game.moveBubble();\n    this.hasWon(intId);\n};\nView.prototype.startScreen = function(){\n\tthis.ctx.clearRect(0, 0, 640, 800);\n\tthis.ctx.font = \"64px Lato\";\n\tthis.ctx.fillStyle = \"black\";\n\tthis.ctx.fillText(\"PrimeOrdealllll\", 140, 400);\n\tthis.ctx.font = \"36px Lato\";\n\tthis.ctx.fillText(\"Start\", 120, 100);\n\tthis.ctx.font = \"36px Lato\";\n\tthis.ctx.fillText(\"Instructions\", 120, 150);\n\n}\nView.prototype.hasWon = function() {\n\tif (this.game.lost()){\n\t\tthis.page = 5;\n\t}\n};\nView.prototype.loseScreen = function(int){\n\tthis.ctx.clearRect(0, 0, 640, 800);\n  this.ctx.font = \"36px Lato\";\n\tthis.ctx.fillStyle = \"black\";\n\tthis.ctx.fillText(\"YOU LOST!\", 140, 140);\n\tthis.ctx.font = \"36px Lato\";\n\tthis.ctx.fillStyle = \"black\";\n\tthis.ctx.fillText(\"Your score was:\", 140, 340);\n\tthis.ctx.font = \"36px Lato\";\n\tthis.ctx.fillStyle = \"black\";\n\tthis.ctx.fillText(this.game.score, 140, 380);\n\tthis.ctx.font = \"36px Lato\";\n\tthis.ctx.fillStyle = \"black\";\n\tthis.ctx.fillText(\"Retry\", 140, 520);\n};\n\nmodule.exports = View;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/view.js\n ** module id = 1\n ** module chunks = 0\n **/","var Bubble = require('./bubble.js');\nvar Game = function(ctx){\n  this.ctx = ctx;\n  this.grid = Array.from(Array(8), function(spot){\n    return Array.from(Array(10));\n  }); \n  this.bubbles = [];\n  this.primes = [2, 3, 5, 7, 11,\n                13, 17, 19, 23, \n                29, 31, 33, 37, 41, \n                43, 47, 53, 59, 61, \n                67, 71];\n  \n  this.colSums = Array.from(Array(8), function(_){return 0;});\n  this.timeElapsed = 0;\n  this.turns = 0; \n  this.score = 0;\n  this.dropHiddenBubbles();\n  this.currentBubble = this.addBubble();\n  $(document).on(\"keydown\", this.updatePosition.bind(this));\n  setInterval(this.incrementTime.bind(this), 10)\n};\nGame.prototype.updateScore = function(numOfBubbles){\n  if (numOfBubbles === 0) return;\n  this.score += 2 * Math.pow(2, 2 * numOfBubbles - 1);\n};\nGame.prototype.incrementTime = function(){\n  this.timeElapsed++;\n};\n\nGame.prototype.updatePosition = function(e){\n    var posY = this.currentBubble.pos_y,\n        col = this.currentBubble.col;\n    if (!this.currentBubble.autoFall){\n    switch (e.which){\n      case 32: \n        this.currentBubble.setAutoFall();\n        break;\n      case 37: \n        if (col >= 1 && posY < (750 - ((this.grid[col - 1].indexOf(undefined) + 1) * 60 + 30 + 30))){\n          col--;\n        }\n        break;\n      case 39:\n        if (col <= 6 && posY < (750 - (this.grid[col + 1] * 60 + 30 + 30))){\n          col++;\n        }\n        break;\n    }  \n  }\n  // this.currentBubble.moveX(e.which);\n};\n\nGame.prototype.addBubble = function(){\n  var speed = 1,  \n      randomNum = (Math.random() * 7) <= 6 ? Math.ceil(Math.random() * 5 + 1) : 7,\n      xPos = Math.floor(Math.random() * 8), //(canvas size/6) (offset for 40 pixel) (30 for radius)\n      newBubble = new Bubble(this.ctx, xPos, speed, randomNum);\n  this.bubbles.push(newBubble);\n  return newBubble;\n};\n\nGame.prototype.moveBubble = function(){\n  console.log(this.colSums);\n  var bubbleCol = this.currentBubble.col,\n      currentCol = this.grid[this.currentBubble.col];\n  numOfBubblesInCol = currentCol.reduce(function(a, b){\n                                    return a + (!!b ? 1 : 0);\n                                  }, 0);\n  if (this.currentBubble.pos_y >= (750 - (numOfBubblesInCol * 60 + 30 + 30))){ \n    this.grid[bubbleCol][numOfBubblesInCol] = this.currentBubble;\n    this.colSums[bubbleCol] += this.currentBubble.value; \n    this.currentBubble = this.addBubble();\n    this.turns++;\n    this.checkPrimesInRows();\n  } else {\n    this.currentBubble.fall(); //check every bubble if they're where they're supposed to be\n  }\n\n  for (var i = 0; i < this.grid.length; i++){\n    var currentCol = this.grid[i];\n    if (currentCol.every(function(cell){return !cell;})) continue;\n    for (var j = 0; j < currentCol.length; j++){\n      if (!currentCol[j]) continue;\n      var currentBubble = currentCol[j];\n      if (currentBubble.pos_y < (750 - (j * 60 + 30 + 30))){\n          currentBubble.fall();\n      } else if (currentBubble.pos_y >  (750 - (j * 60 + 60))){  \n        currentBubble.pos_y = 750 - (j * 60 + 60);\n      }\n    }\n  }\n};\n\nGame.prototype.dropHiddenBubbles = function(){\n  this.grid.forEach(function(col, idx){\n    var randomNum = (Math.random() * 7) <= 6 ? Math.ceil(Math.random() * 5 + 1) : 7;\n    var newBubble = new Bubble(this.ctx, idx, 10, randomNum, true, true);\n    col[col.indexOf(undefined)] = newBubble;//index of looks for the first item that is undefined\n    this.colSums[idx] += randomNum;\n    this.bubbles.push(newBubble);\n  }.bind(this));\n\n //add sum to col\n};\nGame.prototype.drawText= function(){\n  this.ctx.clearRect(0, 0, 640, 800);\n  this.ctx.font = \"36px Lato\";\n  this.ctx.fillStyle = \"black\";\n  this.ctx.fillText(\"PrimeOrdeal\", 40, 60);\n  this.ctx.font = \"24px Lato\";\n  this.ctx.fillStyle = \"black\";\n  this.ctx.fillText(\"Score\", 24, 280);\n  this.ctx.font = \"24px Lato\";\n  this.ctx.fillStyle = \"black\";\n  this.ctx.fillText(this.score, 44, 320);\n  this.ctx.font = \"20px Lato\";\n  this.ctx.fillStyle = \"black\";\n  this.ctx.fillText(\"Turns Left\", 14, 520);\n  this.ctx.font = \"24px Lato\";\n  this.ctx.fillStyle = \"black\";\n  this.ctx.fillText(10 -this.turns, 44, 560);\n}\n\nGame.prototype.draw = function(){\n  this.drawText();\n  this.ctx.beginPath();\n  this.ctx.lineWidth = 4;\n  this.ctx.moveTo(118, 120);\n  this.ctx.lineTo(118, 722);\n  this.ctx.lineTo(602, 722);\n  this.ctx.lineTo(602, 120);\n  this.ctx.strokeStyle = \"black\";\n  this.ctx.stroke();\n  this.ctx.lineWidth = 2;\n  this.ctx.fillStyle = \"black\";\n  if (this.turns === 10){\n    this.turns = 0;\n    this.dropHiddenBubbles();\n  }\n  this.bubbles.forEach(function(bubble){\n      bubble.draw(); \n  });\n};\n\nGame.prototype.checkPrimesInRows = function(){  \n  var bubblesToDelete = [];\n  for (var i = 0; i < this.grid[0].length; i++){\n\n    var currentSum = 0, startPoint = 0;\n    for (var j = 0; j < this.grid.length; j++){\n      if (typeof this.grid[j][i] === \"undefined\" || this.grid[j][i].hidden){\n        startPoint = j + 1;\n        currentSum = 0;\n        continue;\n      }\n      currentSum += this.grid[j][i].value;\n\n      if (j === (this.grid.length - 1) || typeof this.grid[j + 1][i] === \"undefined\"){\n        if ((j - startPoint) > 0 && this.primes.indexOf(currentSum) > -1){\n          for (var m = startPoint; m <= j; m++){\n            bubblesToDelete.push([m, i]);\n          }\n        }\n        startPoint = j;\n        currentSum = 0;        \n      }\n    }\n  }\n  this.checkPrimesInCols(bubblesToDelete);\n};\n\nGame.prototype.deleteBubbles = function(coords){\n  var coords = coords.sort(function(a,b){\n    return b[1] - a[1];\n  }); \n  //so I can shift bubble from the top down,\n  //not having to worry about\n  coords.forEach(function(coord){\n    var currentBubble = this.grid[coord[0]][coord[1]];\n    var idx = this.bubbles.findIndex(function(bubble){\n      return bubble.isEqual(currentBubble);\n    });\n    if (idx > -1){\n      this.colSums[coord[0]] -= currentBubble.value;\n      this.grid[coord[0]][coord[1]] = undefined;\n      this.unveilSurroundings(coord[0], coord[1]);\n      this.grid[coord[0]].splice(coord[1], 1);\n      this.grid[coord[0]].push(undefined);\n      this.bubbles.splice(idx, 1);\n    }\n  }.bind(this));\n};\n\nGame.prototype.unveilSurroundings = function(col, row){\n  if (col < 6 && this.grid[col + 1][row]) this.grid[col + 1][row].unveil();\n  if (col > 1 && this.grid[col - 1][row]) this.grid[col - 1][row].unveil();\n  if (this.grid[col][row + 1]) this.grid[col][row + 1].unveil();\n  if (this.grid[col][row - 1]) this.grid[col][row - 1].unveil();\n};\n\nGame.prototype.checkPrimesInCols = function(bubblesToDelete){\n  for (var j = 0; j < this.colSums.length; j++){\n    if (this.grid[j].findIndex(function(cell){ \n          return !!cell && cell.hidden; \n        }) > -1){\n      continue;\n    }\n    if (this.primes.indexOf(this.colSums[j]) > -1 && \n          this.grid[j].reduce(function(a,b){\n            return a + (!!b ? 1 : 0);\n          },0) > 1){\n      for (var m = 0; m < this.grid[j].length; m++){\n        if (typeof this.grid[j][m] === \"undefined\") break;\n        if (bubblesToDelete.findIndex(function(coord){\n           return coord.toString() === [j, m].toString();\n        }) === -1){\n           bubblesToDelete.push([j, m]);\n        }\n      }\n    }\n  }\n  this.deleteBubbles(bubblesToDelete);\n  this.updateScore(bubblesToDelete.length);\n};\n\n\nGame.prototype.lost = function(){\n\n  if (this.grid.some(function(col){\n    return col.every(function(cell){ \n      return !!cell;\n    })\n  })){\n    return true;\n  }\n  return false;\n};\n\nmodule.exports = Game;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game.js\n ** module id = 2\n ** module chunks = 0\n **/","var Bubble = function(ctx, col, speed, value, autoFall, hidden){\n  this.ctx = ctx;\n  this.size = 30;\n  this.pos_y = 0;\n  this.col = col;\n  this.speed = speed;\n  this.value = value;\n  this.color = Bubble.color(value);\n  this.autoFall = autoFall || false;\n  this.hidden = hidden || false;\n};\n\nBubble.prototype.moveX = function(keyCode){\n  if (!this.autoFall){\n    switch (keyCode){\n      case 32: \n        this.setAutoFall();\n        break;\n      case 37: \n        if (this.col >= 1){\n          this.col--;\n        }\n        break;\n      case 39:\n        if (this.col <= 6){\n          this.col++;\n        }\n        break;\n    }  \n  }\n}\nBubble.color = function(value){\n  switch(value){\n    case 2:\n      return \"#009900\";\n      break;\n    case 3:\n      return \"#000099\";\n      break;\n    case 4:\n      return \"#994d00\";\n      break;\n    case 5:\n      return \"#990000\";\n      break;\n    case 6:\n      return \"#009999\";\n      break;\n    case 7:\n      return \"#000000\";\n      break;\n  }\n};\nBubble.prototype.draw = function(){\n  var pos_x = this.col * 60 + 120 + 30;\n  this.ctx.fillStyle = this.hidden ? \"#333\" : this.color;\n  this.ctx.beginPath();\n  this.ctx.arc(pos_x, this.pos_y, this.size, 0, 360);\n  this.ctx.fill();\n  if (!this.hidden){\n    this.ctx.font = \"20px Lato\";\n    this.ctx.strokeStyle = \"white\";\n    this.ctx.strokeText(this.value, pos_x - 5, this.pos_y + 5);\n  }\n};\n\nBubble.prototype.setAutoFall = function(){\n  this.autoFall = true;\n  this.speed = 10;\n};\n\nBubble.prototype.fall = function(){\n  this.pos_y += this.speed;\n};\n\nBubble.prototype.isEqual = function(bubble){\n  return !!bubble && this.pos_y === bubble.pos_y && this.col === bubble.col &&\n          this.value === bubble.value;\n};\n\nBubble.prototype.unveil = function(){\n  this.hidden = false;\n};\n\nmodule.exports = Bubble;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/bubble.js\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}